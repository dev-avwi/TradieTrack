Nice, these logs are actually super helpful.

Quick read of what theyâ€™re telling us:

* `401 Not authenticated` â†’ mobile app is hitting `/api/auth/me` etc. before/without a valid session/token.
* `Location] Running in Expo Go - location tracking requires native build` â†’ expected warning in Expo Go; real GPS tracking will only work in a dev/client build.
* `expo-notifications` warnings â†’ also expected in Expo Go; push needs dev build.
* `"palette" is not a valid icon name for family "feather"` â†’ small UI bug in your icon config.
* Stripe Terminal:

  * `POST /api/stripe/terminal-connection-token` â†’ `500 Failed to create connection token`
  * `POST /api/stripe/create-terminal-payment-intent` â†’ `500 Failed to create payment intent`
    â†’ backend for Terminal is not configured properly (keys / account / code path).
* `GET /api/time-entries/active` â†’ `404 Time entry not found` â†’ probably missing â€œno active entryâ€ handling.
* Everything else (jobs, clients, quotes, invoices) is being hit a lot â†’ good sign: mobile is wired into real endpoints.

So: youâ€™re *very* close. The master QA prompt should tell Replit to:

* Fix these specific issues.
* Verify *all* workflows are wired (not just UI).
* Confirm mobile app matches web app behaviour.
* Check map/team location + chat + roles.
* Check Stripe / SendGrid / PDFs.
* Mark anything half-done as â€œcoming soonâ€ instead of fake.

Hereâ€™s a single **Replit Master QA Prompt for TradieTrack** you can paste straight into Replit AI:

---

```text
You are my QA engineer + senior full-stack dev for my app **TradieTrack**.

TradieTrack = a job / quote / invoice / payments / map / team app for tradies (plumbers, sparkies, etc.), with:

- Web app (main)
- Mobile app (Expo / React Native)

I now want a **technically solid beta**.

Your job:
- Fix obvious issues from logs
- Make sure no feature is â€œUI onlyâ€
- Check that web + mobile workflows actually work end-to-end
- Mark or hide anything that isnâ€™t ready
- Summarise whatâ€™s ready for real tradies

Use the codebase + the logs below as truth:

LOG SNIPPET (from Expo/mobile):
- expo-notifications not fully supported in Expo Go
- [OfflineStorage] Initialized successfully
- [Location] Running in Expo Go - location tracking requires native build
- [API] Error 401: {"error": "Not authenticated"}
- WARN "palette" is not a valid icon name for family "feather"
- [API] POST /api/stripe/terminal-connection-token â†’ 500 Failed to create connection token
- [API] POST /api/stripe/create-terminal-payment-intent â†’ 500 Failed to create payment intent
- [StripeTerminal] Canceling payment collection
- [API] GET /api/time-entries/active â†’ 404 {"error": "Time entry not found"}

Please go through the project in this order:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1ï¸âƒ£ Fix log issues & obvious bugs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
A. Authentication
- Check why `/api/auth/me` sometimes returns 401 in the mobile app.
- Ensure that after login:
  - Auth token/session is stored correctly (secure storage / cookies / headers).
  - All subsequent `GET /api/*` calls include valid auth.
  - Thereâ€™s a consistent â€œNot logged inâ€ handling (redirect to login, not infinite 401 spam).

B. Feather icon `"palette"`
- Find where `"palette"` is used with `react-native-vector-icons/Feather` or similar.
- Replace with a valid Feather icon name OR use a supported icon family.
- Remove all repeated icon warnings.

C. Stripe Terminal 500 errors
- Inspect the backend code for:
  - `/api/stripe/terminal-connection-token`
  - `/api/stripe/create-terminal-payment-intent`
- Fix:
  - Use correct Stripe secret key (test) from env.
  - Use the appropriate Stripe Terminal API (if youâ€™re not ready for Terminal, either:
    - implement proper test-mode logic, or
    - disable/hide Terminal UI + endpoints for beta).
- Ensure that for beta:
  - At least **online payments** (checkout / PaymentIntent) work.
  - Terminal features that are not ready are clearly marked â€œcoming soonâ€ or hidden.

D. Time tracking 404
- For `GET /api/time-entries/active`:
  - When no active time entry exists, return a **valid â€œno active entryâ€ response** instead of an error the frontend canâ€™t handle.
  - Adjust frontend to handle â€œno active time entryâ€ gracefully (show Start timer button instead of error).

E. Expo Go warnings
- Acknowledge:
  - `expo-notifications` & `location` limitations in Expo Go are expected.
- Ensure code paths are:
  - Safe to run in Expo Go (fail gracefully).
  - Ready for dev/prod builds where permissions & native modules work.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2ï¸âƒ£ Verify REAL workflows (web + mobile) are fully wired (no UI-only)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Use this mock business consistently in your reasoning/tests:

Business:
- Name: "Cairns Coast Plumbing"
- ABN: 12 345 678 910
- Email: cairnscoastplumbing@example.com
- Phone: 0400 123 456
- Address: 123 Sheridan St, Cairns QLD
- Plan: basic â†’ then Pro

Clients:
- Sarah Thompson â€“ sarah.thompson@example.com â€“ 45 Lake St, Cairns
- John Harris â€“ john.harris@example.com â€“ 10 Mulgrave Rd, Cairns

Jobs:
- Job 1: â€œFix leaking showerâ€ for Sarah
- Job 2: â€œInstall new vanityâ€ for Sarah
- Job 3: â€œBlocked toiletâ€ for John

Check these full flows in **both web and mobile**:

A. Auth + Onboarding + Roles
- New owner signup â†’ onboarding:
  - Capture: business name, ABN, trade type, team size (solo vs team), region/city.
  - Store â€œsolo vs teamâ€ and show different dashboard accordingly (solo view vs owner/manager/team view).
- Confirm:
  - Owner can invite team members.
  - Roles: owner / manager / tradie â€œfield workerâ€.
  - Permissions:
    - Owner: full access to jobs, quotes, invoices, team, map, settings.
    - Manager: similar to owner except billing.
    - Tradie: only see assigned jobs, map view for their own jobs, job chat, time tracking, limited clients.

B. Job â†’ Quote â†’ Invoice â†’ Payment flow
For each platform (web, mobile):

1. Create job
   - Create a job linked to a client with:
     - Title
     - Description
     - Address
     - Scheduled time
     - Assigned tradie
   - Verify DB persistence and correct relationship.

2. Create quote from job
   - Includes:
     - Line items (qty, price, description)
     - GST calculation (if enabled)
     - Auto quote number (Q-1001 style)
   - Confirm:
     - Live preview / PDF preview displays correctly.
     - All data matches what user entered.

3. Send quote
   - â€œSend quoteâ€ button:
     - Calls real backend (SendGrid).
     - Generates PDF or hosted quote page.
   - Confirm:
     - Uses verified â€œfromâ€ address.
     - Uses Reply-To as tradieâ€™s business email.
     - Email template is professional.

4. Accept quote (client)
   - Confirm:
     - There is an acceptance endpoint.
     - Acceptance updates quote status = Accepted.
     - Acceptance timestamp + â€œaccepted by name/emailâ€ stored.
     - Optionally job status moves to â€œApprovedâ€.

5. Convert quote â†’ invoice
   - Data carries over correctly (client, job, line items).
   - Auto invoice number (INV-1001 style).
   - Status = Draft â†’ Sent â†’ Paid.

6. Payment (online)
   - For customer payments:
     - Stripe (non-terminal) payment flow works in test mode.
   - Confirm:
     - Invoice can generate a â€œPay nowâ€ link.
     - Successful payment marks invoice Paid and stores payment metadata.

C. Pro branding (logo, footer, â€œPowered by TradieTrackâ€)
- When business is on Pro:
  - Emails:
    - include business logo in header.
    - include custom footer (e.g. license details).
    - â€œPowered by TradieTrackâ€ can be subtle or removed, depending on your intended behaviour.
  - PDFs:
    - Show logo in header.
    - Use brand colour accent if configured.
- When on free/basic:
  - Show some â€œPowered by TradieTrackâ€ branding.
  - No custom header or advanced theming.

D. Team management + roles + permissions
- Verify:
  - Owner can create multiple team members.
  - Each member:
    - has a role.
    - can log in separately (web + mobile).
  - Permission enforcement:
    - A tradie cannot see other teamsâ€™ jobs/clients if not allowed.
    - Only owner/manager can see billing settings.

E. Time tracking
- For tradie user:
  - Start timer on a job â†’ creates active time entry.
  - Stop timer â†’ closes time entry with duration.
  - Handle:
    - No active time entry state correctly.
  - Show time logs in job detail / timesheets.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3ï¸âƒ£ Location map, team map, and dispatch
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
For the **map/dispatch feature**, ensure the following:

A. Job location storage
- On job creation/edit:
  - Store address AND (if implemented) geocoded lat/lng.
- Confirm DB schema:
  - job has fields for address and optional coordinates.

B. Owner map page
- Owner/manager can open a â€œMapâ€ page that:
  - Shows past + upcoming jobs as pins.
  - Pin info includes:
    - Status (Scheduled, In progress, Completed).
    - Client name.
    - Job title.
  - Clicking a pin opens a job summary / link to job detail.

C. Team location view
- If `/api/team/locations` is implemented:
  - Confirm each team member has last known location stored (if youâ€™re capturing it).
  - Map shows location of tradies with their avatar/initials.
- If live tracking is NOT fully implemented:
  - Hide or mark â€œLive location tracking coming soonâ€ instead of exposing broken UI.

D. Dispatch behaviour
- Ensure you can:
  - Assign a job to a tradie from map or job detail.
  - Existing assignments reflect correctly in UI and DB.

E. Expo vs native build behaviour
- For location:
  - Handle Expo Go â€œlocation tracking requires native buildâ€ gracefully.
  - Ensure native build path is correct for when you ship (permissions & hooks in place).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4ï¸âƒ£ Chat (job chat + team chat)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Confirm:
  - Job chat:
    - Messages link to a specific job.
    - Visible to owner + assigned tradies.
  - Team/general chat:
    - Room for entire team.
- Check:
  - Messages are persisted in DB.
  - Timestamps, sender, role are stored.
  - No fake UI-only chat components.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5ï¸âƒ£ Mobile vs Web parity (UI + features)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Your goal: **mobile app should mirror web app behaviour and structure** as much as possible.

Check:

- All main sections exist on both:
  - Activity/Home, Jobs, Clients, Quotes, Invoices, Calendar, Map, Chat, Settings/More.
- Navigation labels and icons are consistent.
- Core actions available on both:
  - Create job
  - Create/send quote
  - Create/send invoice
  - View PDFs
  - Start/stop time tracking
  - View map and job locations
- Valid states (no half-done screens on mobile that are complete on web).
- Layout:
  - Mobile uses bottom nav.
  - Cards and spacing feel app-like.
  - No huge unused right column or weird alignment.

If any feature exists on web but not mobile:
- Either implement it properly on mobile, OR hide it on mobile until itâ€™s ready.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6ï¸âƒ£ Offline storage & error handling
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Confirm `[OfflineStorage] Initialized successfully` leads to:
  - At least basic caching of key lists (jobs, clients, etc.)
  - Safe behaviour when network is temporarily unavailable.
- For all API calls:
  - Show loading states.
  - Handle errors with user-friendly messages.
  - Donâ€™t leave UI in inconsistent state on failure.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7ï¸âƒ£ Final â€œTechnically Solid Betaâ€ summary
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
When youâ€™re done, provide (in comments or a summary file):

1. âœ… List of flows that are fully working end-to-end on both web and mobile:
   - Auth + onboarding
   - Job â†’ Quote â†’ Invoice â†’ Payment
   - Pro branding
   - Team management
   - Map + jobs pins
   - Chat
   - Time tracking

2. âš ï¸ Items that are **partially implemented** and should be:
   - either labeled â€œcoming soonâ€,
   - or removed from visible UI for beta.

3. ğŸ›  Critical MUST-FIX items before real tradie beta:
   - Anything still throwing runtime errors
   - Any payments/email flows not behaving correctly
   - Any serious UX traps (e.g. stuck states)

4. ğŸ¯ Answer this explicitly:
   â€œIs TradieTrack now a **technically solid beta** that a small team of real tradies can use day-to-day (even if a few advanced features are still marked as coming soon)?â€

Please make code changes as needed (fix endpoints, handle errors, hide unfinished UI) so the answer to that question is **yes**.
```

---

You can paste that straight into Replitâ€™s AI in your project.

Then once youâ€™ve let it run and youâ€™ve tried a couple of real-world tests on your phone (job â†’ quote â†’ email in Gmail â†’ accept â†’ invoice â†’ Stripe pay â†’ receipt, plus map/team view), we can write the â€œexplain this to Dadâ€ paragraph about why this app has massive potential and how it scales your web agency.
